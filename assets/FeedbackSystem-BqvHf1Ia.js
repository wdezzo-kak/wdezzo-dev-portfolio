import{c as I,r as a,j as e,m as l,A as j,X as L,C as D}from"./index-C2mJjdH1.js";import{C as M,S as U}from"./send-DbgSrDq_.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],H=I("message-square",P),k="brutal_feedback_draft",E=["bg-brutal-lime","bg-brutal-pink-neon","bg-brutal-blue-electric","bg-brutal-orange-hot","bg-brutal-yellow","bg-brutal-cyan-deep"],R=["SOFTWARE_ENGINEER","PRODUCT_DESIGNER","TECH_ARCHITECT","CREATIVE_DIRECTOR","FOUNDER @ STEALTH_STARTUP","FULLSTACK_DEV","UX_RESEARCHER","DEVOPS_ENGINEER","PRODUCT_MANAGER","SYSTEM_ADMIN","VISUAL_STRATEGIST","FRONTEND_SPECIALIST","CTO @ ALPHA_TECH","OPEN_SOURCE_CONTRIBUTOR"],v=()=>{const n="abcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let o=0;o<10;o++)s+=n.charAt(Math.floor(Math.random()*n.length));return s};function z({metadata:n}){const[s,o]=a.useState(!1),[m,N]=a.useState(!1),[y,w]=a.useState(v()),[d,u]=a.useState(""),[i,h]=a.useState(""),[c,x]=a.useState(0),[b,p]=a.useState(""),[T,S]=a.useState(0),[_,C]=a.useState(E[0]);a.useEffect(()=>{const t=r=>{r.key==="Escape"&&o(!1)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),a.useEffect(()=>{s&&C(E[Math.floor(Math.random()*E.length)])},[s]),a.useEffect(()=>{const t=localStorage.getItem(k);if(t)try{const{name:r,role:f,rating:g,opinion:A}=JSON.parse(t);u(r||""),h(f||""),x(g||0),p(A||"")}catch(r){console.error(r)}},[]),a.useEffect(()=>{m||localStorage.setItem(k,JSON.stringify({name:d,role:i,rating:c,opinion:b}))},[d,i,c,b,m]);const O=async t=>{t.preventDefault();const r=i.trim()!==""?i.toUpperCase():R[Math.floor(Math.random()*R.length)],f={id:y,name:d.trim()||"ANONYMOUS_ENTITY",role:r,rating:c,opinion:b,origin_section:n.currentSection,project_history:n.projectHistory.join(", "),show_in_testimonials:!1};try{await fetch(D.GOOGLE_SCRIPT_URL,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),N(!0),localStorage.removeItem(k),setTimeout(()=>{o(!1),setTimeout(()=>{N(!1),x(0),u(""),h(""),p(""),w(v())},500)},3e3)}catch(g){console.error("Submission failed:",g),alert("DATA_LINK_FAILURE. CHECK CONSOLE.")}};return e.jsxs(e.Fragment,{children:[e.jsx(l.button,{initial:{scale:0},animate:{scale:1},onClick:()=>o(!s),className:"fixed bottom-6 right-6 z-[5110] w-14 h-14 bg-brutal-yellow dark:bg-brutal-purple border-4 border-black dark:border-white shadow-hard dark:shadow-hard-white  transition-all flex items-center justify-center text-black cursor-pointer group active:translate-x-1 active:translate-y-1 active:shadow-none",children:e.jsx(j,{mode:"wait",children:s?e.jsx(l.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},children:e.jsx(L,{size:24,strokeWidth:3})},"close"):e.jsx(l.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},children:e.jsx(H,{size:24,strokeWidth:3})},"open")})}),e.jsx(j,{children:s&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[5100] bg-black/40 sm:bg-transparent backdrop-blur-sm sm:backdrop-blur-none flex items-center justify-center sm:block p-4",onClick:()=>o(!1),children:e.jsx(l.div,{initial:{y:50,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:50,opacity:0,scale:.9},className:`w-full max-w-md ${_} border-4 border-black shadow-hard-xl relative flex flex-col max-h-[85vh] sm:fixed sm:bottom-24 sm:right-6`,onClick:t=>t.stopPropagation(),children:e.jsx("div",{className:"overflow-y-auto p-8 brutal-scrollbar",children:m?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(l.div,{initial:{scale:0},animate:{scale:1},className:"inline-block p-4 bg-white border-4 border-black mb-6",children:e.jsx(M,{size:48,className:"text-black"})}),e.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter mb-2 text-black",children:"DATA_RECEIVED"}),e.jsx("p",{className:"font-mono text-sm text-black/70 italic",children:"SYNC_TO_SHEET_INITIATED"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 border-b-4 border-black pb-4 flex justify-between items-end",children:[e.jsx("h2",{className:"text-3xl font-black uppercase tracking-tighter leading-none text-black",children:"VISITOR_LOG"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-black opacity-50",children:y})]}),e.jsxs("form",{name:"visitor-feedback",onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-black uppercase text-xs mb-1 text-black",children:"Identity"}),e.jsx("input",{type:"text",name:"name",value:d,onChange:t=>u(t.target.value),placeholder:"NAME / ALIAS",className:"w-full bg-white dark:bg-neutral-800 border-2 border-black p-2 font-mono text-sm focus:bg-black focus:text-white focus:outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-black uppercase text-xs mb-1 text-black",children:"Role / Profession"}),e.jsx("input",{type:"text",name:"role",value:i,onChange:t=>h(t.target.value),placeholder:"BLANK = RANDOM_ROLE",className:"w-full bg-white dark:bg-neutral-800 border-2 border-black p-2 font-mono text-sm focus:bg-black focus:text-white focus:outline-none transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-black uppercase text-xs mb-1 text-black",children:"Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onMouseEnter:()=>S(t),onMouseLeave:()=>S(0),onClick:()=>x(t),className:`w-10 h-10 border-2 border-black transition-all transform active:scale-95 ${(T||c)>=t?"bg-brutal-yellow shadow-hard":"bg-white"}`},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-black uppercase text-xs mb-1 text-black",children:"Transmission"}),e.jsx("textarea",{name:"opinion",required:!0,rows:4,value:b,onChange:t=>p(t.target.value),placeholder:"INPUT_FEEDBACK_HERE...",className:"w-full bg-white dark:bg-neutral-800 border-2 border-black p-2 font-mono text-sm focus:bg-black focus:text-white focus:outline-none transition-colors"})]}),e.jsxs("button",{type:"submit",disabled:c===0,className:"w-full py-4 bg-white disabled:opacity-50 border-4 border-black text-black font-black text-xl uppercase shadow-hard hover:translate-x-1 hover:translate-y-1 hover:shadow-none active:translate-y-0.5 transition-all flex items-center justify-center gap-2",children:["PUSH ",e.jsx(U,{size:20})]})]})]})})})})})]})}export{z as default};
