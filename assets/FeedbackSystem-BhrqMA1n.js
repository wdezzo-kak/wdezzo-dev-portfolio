import{c as A,r as a,j as e,m as c,A as v,X as L,C as D}from"./index-BewlzuoC.js";import{C as M,S as U}from"./send-Bn3GDBDr.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],F=A("message-square",P),E="brutal_feedback_draft",N=["bg-brutal-lime","bg-brutal-pink-neon","bg-brutal-blue-electric","bg-brutal-orange-hot","bg-brutal-yellow","bg-brutal-cyan-deep"],j=["SOFTWARE_ENGINEER","PRODUCT_DESIGNER","TECH_ARCHITECT","CREATIVE_DIRECTOR","FOUNDER @ STEALTH_STARTUP","FULLSTACK_DEV","UX_RESEARCHER","DEVOPS_ENGINEER","PRODUCT_MANAGER","SYSTEM_ADMIN","VISUAL_STRATEGIST","FRONTEND_SPECIALIST","CTO @ ALPHA_TECH","OPEN_SOURCE_CONTRIBUTOR"],R=()=>{const r="abcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let o=0;o<10;o++)s+=r.charAt(Math.floor(Math.random()*r.length));return s};function z({metadata:r}){const[s,o]=a.useState(!1),[u,S]=a.useState(!1),[m,w]=a.useState(R()),[d,h]=a.useState(""),[n,f]=a.useState(""),[l,x]=a.useState(0),[b,p]=a.useState(""),[T,y]=a.useState(0),[C,_]=a.useState(N[0]);a.useEffect(()=>{const t=i=>{i.key==="Escape"&&o(!1)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),a.useEffect(()=>{s&&_(N[Math.floor(Math.random()*N.length)])},[s]),a.useEffect(()=>{const t=localStorage.getItem(E);if(t)try{const{name:i,role:g,rating:k,opinion:I}=JSON.parse(t);h(i||""),f(g||""),x(k||0),p(I||"")}catch(i){console.error(i)}},[]),a.useEffect(()=>{u||localStorage.setItem(E,JSON.stringify({name:d,role:n,rating:l,opinion:b}))},[d,n,l,b,u]);const O=async t=>{t.preventDefault();const i=n.trim()!==""?n.toUpperCase():j[Math.floor(Math.random()*j.length)],g={id:m,name:d.trim()||"ANONYMOUS_ENTITY",role:i,rating:l,opinion:b,origin_section:r.currentSection,project_history:r.projectHistory.join(", "),show_in_testimonials:!1};try{await fetch(D.GOOGLE_SCRIPT_URL,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),S(!0),localStorage.removeItem(E),setTimeout(()=>{o(!1),setTimeout(()=>{S(!1),x(0),h(""),f(""),p(""),w(R())},500)},3e3)}catch(k){console.error("Submission failed:",k),alert("DATA_LINK_FAILURE. CHECK CONSOLE.")}};return e.jsxs(e.Fragment,{children:[e.jsx(c.button,{initial:{scale:0},animate:{scale:1},onClick:()=>o(!s),className:"fixed bottom-6 right-6 z-[5110] w-14 h-14 bg-brutal-yellow dark:bg-brutal-purple border-4 border-black dark:border-white shadow-hard dark:shadow-hard-white transition-all flex items-center justify-center text-black cursor-pointer group focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brutal-lime","aria-label":s?"Close feedback menu":"Open feedback menu","aria-expanded":s,type:"button",children:e.jsx(v,{mode:"wait",children:s?e.jsx(c.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},children:e.jsx(L,{size:24,strokeWidth:3,"aria-hidden":"true"})},"close"):e.jsx(c.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},children:e.jsx(F,{size:24,strokeWidth:3,"aria-hidden":"true"})},"open")})}),e.jsx(v,{children:s&&e.jsx("div",{className:"fixed inset-0 z-[5100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>o(!1),children:e.jsx(c.div,{initial:{y:50,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:50,opacity:0,scale:.9},className:`w-full max-w-md ${C} border-4 border-black shadow-hard-xl relative flex flex-col max-h-[85vh]`,onClick:t=>t.stopPropagation(),role:"dialog","aria-labelledby":"feedback-title","aria-modal":"true",children:e.jsx("div",{className:"overflow-y-auto p-8 brutal-scrollbar",children:u?e.jsxs("div",{className:"py-8 text-center","aria-live":"assertive",children:[e.jsx(c.div,{initial:{scale:0},animate:{scale:1},className:"inline-block p-4 bg-white border-4 border-black mb-6",children:e.jsx(M,{size:48,className:"text-black","aria-hidden":"true"})}),e.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter mb-2 text-black",children:"DATA_RECEIVED"}),e.jsx("p",{className:"font-mono text-sm text-black/70 italic",children:"SYNC_TO_SHEET_INITIATED"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 border-b-4 border-black pb-4 flex justify-between items-end",children:[e.jsx("h2",{id:"feedback-title",className:"text-3xl font-black uppercase tracking-tighter leading-none text-black",children:"VISITOR_LOG"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-black opacity-60","aria-label":`Session ID: ${m}`,children:m})]}),e.jsxs("form",{name:"visitor-feedback",onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedback-name",className:"block font-black uppercase text-xs mb-1 text-black",children:"Identity"}),e.jsx("input",{id:"feedback-name",type:"text",name:"name",value:d,onChange:t=>h(t.target.value),placeholder:"NAME / ALIAS",className:"w-full bg-white border-2 border-black p-2 font-mono text-sm focus:bg-black focus:text-white focus:outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedback-role",className:"block font-black uppercase text-xs mb-1 text-black",children:"Role / Profession"}),e.jsx("input",{id:"feedback-role",type:"text",name:"role",value:n,onChange:t=>f(t.target.value),placeholder:"BLANK = RANDOM_ROLE",className:"w-full bg-white border-2 border-black p-2 font-mono text-sm focus:bg-black focus:text-white focus:outline-none transition-colors"})]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"block font-black uppercase text-xs mb-1 text-black",children:"Rating"}),e.jsx("div",{className:"flex gap-1",role:"group",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onMouseEnter:()=>y(t),onMouseLeave:()=>y(0),onClick:()=>x(t),className:`w-10 h-10 border-2 border-black transition-all transform active:scale-95 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-black ${(T||l)>=t?"bg-brutal-yellow shadow-hard":"bg-white"}`,"aria-label":`Rate ${t} out of 5 stars`,"aria-pressed":l===t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedback-opinion",className:"block font-black uppercase text-xs mb-1 text-black",children:"Transmission"}),e.jsx("textarea",{id:"feedback-opinion",name:"opinion",required:!0,rows:4,value:b,onChange:t=>p(t.target.value),placeholder:"INPUT_FEEDBACK_HERE...",className:"w-full bg-white border-2 border-black p-2 font-mono text-sm focus:bg-black focus:text-white focus:outline-none transition-colors"})]}),e.jsxs("button",{type:"submit",disabled:l===0,className:"w-full py-4 bg-white disabled:opacity-50 border-4 border-black text-black font-black text-xl uppercase shadow-hard hover:translate-x-1 hover:translate-y-1 hover:shadow-none active:translate-y-0.5 transition-all flex items-center justify-center gap-2 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-black",children:["PUSH ",e.jsx(U,{size:20,"aria-hidden":"true"})]})]})]})})})})})]})}export{z as default};
